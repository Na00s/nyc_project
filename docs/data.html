<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>NYC employment - 2&nbsp; Data</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./results.html" rel="next">
<link href="./index.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./data.html"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Data</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">NYC employment</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/Na00s/nyc_project" rel="" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Data</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./results.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Results</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./d3graph.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Interactive graph</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./conclusion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Conclusion</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#description" id="toc-description" class="nav-link active" data-scroll-target="#description"><span class="header-section-number">2.1</span> Description</a></li>
  <li><a href="#missing-value-analysis" id="toc-missing-value-analysis" class="nav-link" data-scroll-target="#missing-value-analysis"><span class="header-section-number">2.2</span> Missing value analysis</a></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/Na00s/nyc_project/edit/main/data.qmd" class="toc-action">Edit this page</a></p><p><a href="https://github.com/Na00s/nyc_project/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Data</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<ul>
<li>https://dol.ny.gov/labor-statistics-new-york-city-region</li>
<li>https://dol.ny.gov/statistics-state-and-area-employment-hours-and-earnings</li>
<li>https://dol.ny.gov/statistics-new-york-city-labor-force-data</li>
<li>https://dol.ny.gov/statistics-new-york-city-employment-statistics</li>
<li>https://www.bls.gov/news.release/metro.t01.htm# (labor force and unemployment by state and metropolitan area)</li>
<li>https://www.bls.gov/ces/data/employment-situation-table-download.htm (Use to get US data)</li>
<li>https://data.bls.gov/PDQWeb/ln (Use to get U.S. labor force data)</li>
</ul>
<p>This first data source we plan to use is the State and Area Employment, Hours, and Earnings taken directly from the New York State Department of Labor’s website. This data is collected by the federal government through the Current Employment Statistics Survey where data is collected each month from roughly 140,000 different businesses and government agencies to find employment, hours, and earnings. This is then taken by the state government and filtered to the proper state and city, in this case, the New York State Department of Labor only included data points from New York City. The data is in the format of three excel spreadsheets, one contains the hourly earnings for each month from 2013 to 2023 and it is updated monthly, with November and December currently missing from 2023 in the chart. The dimensions of this data are 10 rows for the years with 12 columns for the months. Other relevant information in this data is it includes an annual average for each year and below the main data contains the percent changes from each month and the annual percent change. The next spreadsheet contains the average weekly hours worked in New York City where again the data is for each month from 2013 to 2023 and is updated monthly, with November and December missing in 2023. Therefor, it has the same dimensions and also includes similar extra information like the annual average and the percent changes below the main data. Lastly, this data contains a spreadsheet with the average weekly earnings of New York City employees. This is again in the same format as the previous data where it contains data from 2013 to 2023 for each month excluding the 2023 months that have not finished yet. It also includes the same additional information with the annual averages and the percent changes below. In order to import this data we will have to import each spreadsheet from the file separaetly. Along with this, we will likely have to clean the title section and remove the percent change sections as the empty spaces in between and the formatting would cause issues importing. If the percent change section is needed we will need to transform the data to add new columns otherwise it would influence the regular data.</p>
<p>The next data source we are using is the New York City Labor Force data taken directly from the New York State Department of Labor’s website. This data is collected by the state government through a few different sources including industry data, unemployment insurance claims, and the Current Population Survey. This survey is collected monthly along with the other data, allowing this labor force data to be updated monthly. When it comes to the format of the data the rows are the month and year, for example “Oct-23” is the last entry, and then there are columns for Labor Force (the number of people in the labor force), Employment (the number of people currently employed), Emp/Pop (The percent of the population that is employed), Unemployed (the number of people currently unemployed), Unemp Rate (The percent of people in the labor force that are unemployed), and the LFPART (stands for labor force participation, it is the percent of the population in the labor force). Since this includes historical data, the first row is from January 1976, giving the data 574 rows with the aforementioned 6 columns. This spreadsheet includes another unlabeled column which appears to be the change in unemployment rate. The spreadsheet also includes a few charts which we won’t be using. In order to import this data we will again have to remove some titles from the spreadsheet and add one for the change in unemployment rate column, then I believe this one will be quite simple to import to RStudio where we can play around and transform the data if needed. The only issue I see is the missing value on the first change in unemployment rate but this missing value could just be an NA or 0.</p>
<p>The next data source we are using is the New York City Employment Statistics data taken from the New York State Department of Labor’s website. This data is collected through the various surveys previously mentioned such as the Current Population Survey, the Current Employment Statistics, as well as industry data. This data is again updated every month. This is again updated monthly but has a very different layout. This data has columns for area, areacode, year, area name, industry title, and then one for each month. Due to the amount of different indsutries included this is a very long dataframe with 3,986 rows and the aforementioned 17 columns. The data includes the number of employees for each month for each sector, the change from year to year, and the percent change from year to year. In order to use this data way may need only use a certain amount of industries that we are interested in otherwise the data may be convoluted. This spreadsheet doesn’t have any title area or anything which will make it easy to load directly into RStudio with the only issue being some gaps in between columns and labeling which we can easily fix.</p>
<p>Lastly, since we will be comparing we will use this same data from the U.S. Bureau of Labor Statistics which collected the data found in these spreadsheets. For example there is a table with each states labor force and unemployment rate and their lare metropolitan areas for 2022 and 2023 for October and September which limits our timeframe. However, this data will be up to date as it is modified daily with the last edit being today 11/30/2023. Through the Current Employment Statistics database and the Current Population Survey database of the U.S. Bureau of Labor Statistics you can find the national data for all the previously described New York data, in the exact same format, with the exact same number of years (2013-2023) all updated each month. These will be easy to import and use in RStudio because they are .csv files and all cleaned to be downloaded and used. The only issue being that for the Employment Statistics data they are all separate spreadsheets for each industry but we will be able to transform the data to a comparable form.</p>
<section id="description" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="description"><span class="header-section-number">2.1</span> Description</h2>
<p>With our main questions being how do New York City labor statistics differ from the rest of the country? Does that make a compelling arguement to stay and work here? Or should we seek employment elsewhere? We can answer these questions by comparing the data we have collected above.</p>
<p>By first comparing the average New York City working hours to the national average we can get a better idea of whether here in the city we will be working more or less than around the country. This can give us an idea of how our work-life balance may be here compared to the rest of the country and if that is something you prioritize when seeking jobs, depending on the results, you may or may not wish to work here in New York City. We can also compare hourly wage to the national average to see if, for the difference in time worked, you are fairly compensated for your work. This will allow us to better understand if the earnings in New York City are worthwhile or whether it could be beneficially to relocate for better pay. Then with the weekly earnings this sort of provides a holistic picture of the past two examples where we get a better understanding of how much you can actually earn. This is because the hourly wage can be misleading if you work many extra hours whereas this weekly earnings, combined with the hours worked, gives an idea of how well you can expect to be compensated for how much you work. This also all happens to be time series data so we may be able to see trends in the data, for example if the average weekly earnings in New York City has steadily increased over the past years more so than the national average that may mean you could expect you wages to continue to grow more here than somewhere else. With that being said, it will be important to compare these sort of trends by looking into the percent changes over 6 months, 1 year, 3 years, and 5 years to get a better sense of possible short term and long term trends and expectations.</p>
<p>Next, the labor force data can give us insight into how easy or hard it may be to find a job. If the unemployment rate is higher here than elsewhere that could be a deterrent for a recent graduate who thinks they may have a better opportunity of securing a job elsewhere. Another way we can view this data is by again looking into the percent changes. For this data we would be more concerned about the short run changes so 3 months, 6 months, 9 months, 1 year, and 1 and a half years would likely be the scope of our percent changes. These changes can give us an idea if people are getting laid off. The idea being that if the unemployment rate changes but the labor force remains about the same, then that means the change isn’t attributed to people joining the labor force but not having a job, but rather people already in the labor force losing their job. This would mean either people are quiting or getting fired and both are not very good signs for new university grads. This can be compared with national data and if it is starkly different, it may be worthwhile to look elsewhere for work.</p>
<p>Lastly, the employment statistics will provide us a more in depth understanding of whether the indsutries we are interested to work in are hiring or not. This data is very similar to the labor force data however it just provides the total employed and is divided into each industry. This will allow us to see how big each industry is in New York City compared to the rest of the country, if it’s large here it may be best for you to stay, but if only a small fraction of employees for that industry work in New York City compared to the rest of the country it could be worthwhile to move. Then once you decide whether the indsutry you’re interested in has a large enough employee base in New York City, we can use this data to get an idea if these industries are hiring. By using percent change over some likely smaller time frames since we’re interested in more short run current hirings, we can see if the number of employees in a sector has been going up or down and compare this with the national average. The idea being, if the industry has no change or negative change they are laying off employees and it may be hard to work in the industry, but if there are positive changes then they’re hiring. Furthermore, if the percent change is drastically lower than the national average, you’re more likely to work in that industry elsewhere and should consider moving.</p>
<p>In the end, we can learn a lot by just comparing the different data to the national averages, but, due to the nature of this time series data, I believe we can learn the most from the trends in each data set. That is why much of our focus will be on the percent changes over certain pre-determined timeframes to give us a better understanding of how each statistic is changing over time.</p>
</section>
<section id="missing-value-analysis" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="missing-value-analysis"><span class="header-section-number">2.2</span> Missing value analysis</h2>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(naniar)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'naniar' was built under R version 4.3.2</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Reading the CSV file </span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>nyclfsa <span class="ot">=</span> <span class="fu">read.csv</span>(<span class="st">"nyclfsa.csv"</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Displaying a vis_miss plot of the missing values in our dataset</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="fu">vis_miss</span>(nyclfsa) <span class="sc">+</span> <span class="fu">ggtitle</span>(<span class="st">"Percentages of Missing Values in the NYC Labor Force Dataset per Column"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="data_files/figure-html/unnamed-chunk-1-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>We notice that for this first dataset, there are no missing values.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Reading the CSV file </span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>nycwe <span class="ot">=</span> <span class="fu">read.csv</span>(<span class="st">"nyc_weekly_earnings.csv"</span>, <span class="at">na.strings =</span> <span class="st">""</span>)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Displaying a vis_miss plot of the missing values in our dataset</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="fu">vis_miss</span>(nycwe) <span class="sc">+</span> <span class="fu">ggtitle</span>(<span class="st">"Percentages of Missing Values in the NYC Weekly Earnings Dataset per Column"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="data_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>For the second weekly earnings dataset, we notice that we have missing values in the last observations row for the columns “Nov”, “Dec”, and “Annual”. This is due to the fact that the last row corresponds to the year 2023, and weekly earning figures haven’t been updated for the months of November and December. The same pattern persists in the 2 other sheets included in the file denoting weekly hours nad hourly earnings.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Reading the CSV file </span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>nychist <span class="ot">=</span> <span class="fu">read.csv</span>(<span class="st">"nychist.csv"</span>, <span class="at">na.strings =</span> <span class="st">""</span>)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Displaying a vis_miss plot of the missing values in our dataset</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="fu">vis_miss</span>(nychist) <span class="sc">+</span> <span class="fu">ggtitle</span>(<span class="st">"Percentages of Missing Values in the NYC Employment Statistics Dataset per Column"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="data_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>We notice a similar pattern in the NYC Employment statistics dataset. In this dataset, the years are listed in descending order with 2023 being at the top; therefore, it is only natural that figures for November and December 2023 are still haven’t being updated yet.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./index.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./results.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Results</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">This book was built with <a href="https://quarto.org/">Quarto</a>.</div>
  </div>
</footer>



</body></html>